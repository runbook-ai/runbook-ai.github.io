<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Runbook AI</title>
  <style>
    *, *::before, *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      background: #f5f7fa;
      color: #1a1a2e;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 48px 16px;
    }

    header {
      text-align: center;
      margin-bottom: 40px;
    }

    header h1 {
      font-size: 2rem;
      font-weight: 700;
      color: #1a1a2e;
      letter-spacing: -0.5px;
    }

    header p {
      margin-top: 8px;
      font-size: 1rem;
      color: #6b7280;
    }

    .card {
      background: #ffffff;
      border: 1px solid #e5e7eb;
      border-radius: 12px;
      padding: 32px;
      width: 100%;
      max-width: 760px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
    }

    .runbook-title {
      font-size: 1.125rem;
      font-weight: 600;
      color: #111827;
      margin-bottom: 12px;
    }

    .label {
      display: block;
      font-size: 0.8125rem;
      font-weight: 500;
      color: #6b7280;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-bottom: 6px;
    }

    textarea {
      width: 100%;
      height: 260px;
      padding: 14px 16px;
      border: 1px solid #d1d5db;
      border-radius: 8px;
      font-family: inherit;
      font-size: 0.9375rem;
      line-height: 1.65;
      color: #374151;
      background: #f9fafb;
      resize: vertical;
      transition: border-color 0.15s, box-shadow 0.15s;
      outline: none;
    }

    textarea:focus {
      border-color: #6366f1;
      box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.15);
      background: #ffffff;
    }

    .actions {
      margin-top: 20px;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    button#runBtn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 10px 24px;
      background: #6366f1;
      color: #ffffff;
      font-size: 0.9375rem;
      font-weight: 600;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.15s, transform 0.1s;
    }

    button#runBtn:hover {
      background: #4f46e5;
    }

    button#runBtn:active {
      transform: scale(0.97);
    }

    button#runBtn:disabled {
      background: #a5b4fc;
      cursor: not-allowed;
      transform: none;
    }

    #status {
      font-size: 0.875rem;
      color: #6b7280;
    }

    #status.success { color: #059669; }
    #status.error   { color: #dc2626; }

    footer {
      margin-top: 40px;
      font-size: 0.8125rem;
      color: #9ca3af;
      text-align: center;
    }

    footer a {
      color: #6366f1;
      text-decoration: none;
    }

    footer a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>

  <header>
    <h1>ðŸ¤– Runbook AI (website coming soon!)</h1>
    <p>Define a runbook and run it with the Runbook AI Chrome extension.</p>
  </header>

  <div class="card">
    <div class="runbook-title">Find car listings</div>

    <label class="label" for="prompt">Runbook prompt</label>
    <textarea id="prompt">Go to www.craigslist.org, and search for "Honda Civic" in the "for sale" section. Filter the results to show only listings with prices between $8000 and $10000. Sort the listings by date and get the last 3 days' results. Cap at 10 listings.

Run sub-task for each listing: Click the listing on the results page to view the details, and store the url, price, vin number and image. Close the listing page.

Finally, generate an HTML table summarizing all listings with columns for title (link to postUrl), price, vin, and image.</textarea>

    <div class="actions">
      <button id="runBtn">â–¶ Run</button>
      <span id="status"></span>
    </div>
  </div>

  <footer>
    Powered by <a href="https://github.com/runbook-ai" target="_blank">Runbook AI</a>
  </footer>

  <script>
    // Replace with your published Chrome extension ID
    const EXTENSION_ID = "kjbhngehjkiiecaflccjenmoccielojj";

    async function startRunbook(prompt) {
      return await chrome.runtime.sendMessage(EXTENSION_ID, { action: "start-runbook", prompt: prompt });
    }

    document.getElementById("runBtn").addEventListener("click", async () => {
      const prompt = document.getElementById("prompt").value.trim();
      const btn = document.getElementById("runBtn");
      const status = document.getElementById("status");

      if (!prompt) {
        status.textContent = "Please enter a runbook prompt.";
        status.className = "error";
        return;
      }

      btn.disabled = true;
      status.textContent = "Starting runbookâ€¦";
      status.className = "";

      try {
        const result = await startRunbook(prompt);
        status.textContent = result?.message ?? "Runbook started successfully.";
        status.className = "success";
      } catch (err) {
        console.error(err);
        status.textContent = "Failed to start runbook. Make sure the Runbook AI extension is installed and enabled.";
        status.className = "error";
      } finally {
        btn.disabled = false;
      }
    });
  </script>

</body>
</html>
